<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Clipn</title>

<link rel="stylesheet" href="style.css">

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
<script src="firebase.js"></script>

</head>
<body>

<!-- ===== ุงูุดุฑูุท ุงูุนููู ===== -->
<div class="topbar">
    <div class="menuBtn" onclick="toggleSidebar()">โฐ</div>
    <div class="logo">Clipn</div>
    <div class="searchBtn" id="searchBtn">๐</div>
</div>


<!-- ===== ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ ===== -->
<div id="sidebar" class="sidebar">

    <h3 id="sideUsername">ุงููุณุชุฎุฏู</h3>

    <div class="sideItem" onclick="toggleDark()">๐ ุงููุถุน ุงููููู</div>
    <div class="sideItem" onclick="changeName()">โ ุชุบููุฑ ุงูุงุณู</div>
    <div class="sideItem" onclick="logout()">๐ช ุชุณุฌูู ุงูุฎุฑูุฌ</div>
    <div class="sideItem">โ๏ธ ุงูุฅุนุฏุงุฏุงุช</div>

</div>


<!-- ===== ุตูุฏูู ุงูุจุญุซ ===== -->
<div id="searchBox" class="searchBox">

    <input id="searchInput" type="text" placeholder="ุงุจุญุซ ุนู @ุงุณู_ุงููุณุชุฎุฏู">

    <button onclick="closeSearch()">ุฅุบูุงู</button>

    <div id="results"></div>

</div>


<!-- ===== ุงูุตูุญุฉ ุงูุชุฑุญูุจูุฉ ===== -->
<div id="welcome" class="welcome">

    <h2 id="welcomeText">๐ ุฃููุงู</h2>
    <p>ุงุถุบุท ๐ ูู ุงูุฃุนูู ูุงุจุญุซ ุนู ุงุณู ูุณุชุฎุฏู ูุจุฏุก ูุญุงุฏุซุฉ ุฎุงุตุฉ</p>

</div>


<!-- ===== ุตูุญุฉ ุงููุญุงุฏุซุฉ ===== -->
<div id="chatPage" class="chatPage">

    <div class="chatHeader">
        <span id="chatUsername">@user</span>
    </div>

    <div id="messages" class="messages"></div>

    <div class="sendBox">
        <input id="messageInput" placeholder="ุงูุชุจ ุฑุณุงูุฉ...">
        <button onclick="sendMessage()">ุฅุฑุณุงู</button>
    </div>

</div>



<!-- ูููุงุช ุงูุฌุงูุงุณูุฑุจุช -->
<script src="app.js"></script>
<script src="search.js"></script>


<script>

/* ุญูุงูุฉ ุงูุตูุญุฉ (ุงุฐุง ูู ูุณุฌู ุฏุฎูู ูุฑุฌุน ูููุฌู) */
const user = localStorage.getItem("chatUser");
const uid  = localStorage.getItem("chatUID");

if(!user || !uid){
    location.href = "../login.html";
}

/* ุงุธูุงุฑ ุงูุงุณู */
document.getElementById("welcomeText").innerText = "๐ ุฃููุงู " + user;
document.getElementById("sideUsername").innerText = "@" + user;

/* ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ */
function toggleSidebar(){
    document.getElementById("sidebar").classList.toggle("open");
}

</script>

</body>
</html>
