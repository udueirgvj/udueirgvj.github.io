<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Chat App</title>

<style>
body{
    margin:0;
    font-family:Arial;
    background:#0f172a;
    color:white;
}

#login{
    display:flex;
    flex-direction:column;
    justify-content:center;
    align-items:center;
    height:100vh;
}

#chat{
    display:none;
    height:100vh;
}

#messages{
    height:85vh;
    overflow-y:auto;
    padding:10px;
}

.msg{
    background:#1e293b;
    margin:5px 0;
    padding:10px;
    border-radius:10px;
}

form{
    display:flex;
    position:fixed;
    bottom:0;
    width:100%;
}

input{
    flex:1;
    padding:12px;
    border:none;
    outline:none;
}

button{
    background:#22c55e;
    border:none;
    color:white;
    padding:12px;
}
</style>
</head>

<body>

<div id="login">
<h2>ادخل اسمك</h2>
<input id="username" placeholder="اسم المستخدم">
<button onclick="enterChat()">دخول</button>
</div>

<div id="chat">
<div id="messages"></div>

<form onsubmit="sendMessage(event)">
<input id="messageInput" placeholder="اكتب رسالة...">
<button>إرسال</button>
</form>
</div>

<script>
let username="";

function enterChat(){
    username=document.getElementById("username").value;
    if(username=="") return alert("اكتب اسمك");

    document.getElementById("login").style.display="none";
    document.getElementById("chat").style.display="block";

    loadMessages();
}

function sendMessage(e){
    e.preventDefault();
    let input=document.getElementById("messageInput");
    let msg=input.value;
    if(msg=="") return;

    let messages=JSON.parse(localStorage.getItem("chat"))||[];
    messages.push({user:username,text:msg});
    localStorage.setItem("chat",JSON.stringify(messages));

    input.value="";
    loadMessages();
}

function loadMessages(){
    let messagesDiv=document.getElementById("messages");
    messagesDiv.innerHTML="";

    let messages=JSON.parse(localStorage.getItem("chat"))||[];

    messages.forEach(m=>{
        let div=document.createElement("div");
        div.className="msg";
        div.innerHTML="<b>"+m.user+":</b> "+m.text;
        messagesDiv.appendChild(div);
    });

    messagesDiv.scrollTop=messagesDiv.scrollHeight;
}
</script>

</body>
</html>
